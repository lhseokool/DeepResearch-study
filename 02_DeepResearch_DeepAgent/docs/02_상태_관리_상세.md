# ìƒíƒœ ê´€ë¦¬ ìƒì„¸ ê°€ì´ë“œ

## ğŸ“Œ ìƒíƒœ(State)ë€?

LangGraphì—ì„œ **ìƒíƒœ(State)**ëŠ” ì—ì´ì „íŠ¸ê°€ ì‘ì—…í•˜ëŠ” ë™ì•ˆ ìœ ì§€ë˜ëŠ” ë°ì´í„°ì…ë‹ˆë‹¤. ë§ˆì¹˜ í”„ë¡œê·¸ë¨ì˜ ë©”ëª¨ë¦¬ì²˜ëŸ¼, í˜„ì¬ ì§„í–‰ ìƒí™©ê³¼ ìˆ˜ì§‘ëœ ì •ë³´ë¥¼ ì €ì¥í•©ë‹ˆë‹¤.

### ì™œ ìƒíƒœê°€ ì¤‘ìš”í•œê°€?

```python
# ìƒíƒœê°€ ì—†ë‹¤ë©´...
def research():
    result1 = search("AI")
    # result1ì„ ì–´ë””ì— ì €ì¥? ë‹¤ìŒ ë‹¨ê³„ì—ì„œ ì–´ë–»ê²Œ ì‚¬ìš©?
    result2 = search("ML")
    # ë‘ ê²°ê³¼ë¥¼ ì–´ë–»ê²Œ í•©ì¹ ?
    
# ìƒíƒœê°€ ìˆë‹¤ë©´...
state = {
    "messages": [],
    "research_results": [],
    "current_step": "searching"
}
# ëª¨ë“  ì •ë³´ê°€ stateì— ì €ì¥ë˜ì–´ ì–¸ì œë“  ì ‘ê·¼ ê°€ëŠ¥!
```

---

## ğŸ—ï¸ ìƒíƒœ êµ¬ì¡° ê³„ì¸µ

```
AgentState (ìµœìƒìœ„)
    â”œâ”€â”€ supervisor_messages    # ê°ë…ì ë©”ì‹œì§€
    â”œâ”€â”€ research_brief         # ì—°êµ¬ ê³„íš
    â”œâ”€â”€ raw_notes             # ì›ì‹œ ë°ì´í„°
    â”œâ”€â”€ notes                 # ì •ë¦¬ëœ ë°ì´í„°
    â””â”€â”€ final_report          # ìµœì¢… ê²°ê³¼

SupervisorState (ê°ë…ììš©)
    â”œâ”€â”€ supervisor_messages
    â”œâ”€â”€ research_brief
    â”œâ”€â”€ notes
    â””â”€â”€ research_iterations   # ë°˜ë³µ íšŸìˆ˜

ResearcherState (ì—°êµ¬ììš©)
    â”œâ”€â”€ researcher_messages
    â”œâ”€â”€ research_topic        # ì—°êµ¬ ì£¼ì œ
    â”œâ”€â”€ compressed_research   # ì••ì¶•ëœ ê²°ê³¼
    â””â”€â”€ tool_call_iterations  # ë„êµ¬ í˜¸ì¶œ íšŸìˆ˜
```

---

## 1ï¸âƒ£ AgentState - ë©”ì¸ ìƒíƒœ

### ì „ì²´ ì½”ë“œ
```python
class AgentState(MessagesState):
    """ë©”ì‹œì§€ì™€ ì—°êµ¬ ë°ì´í„°ë¥¼ í¬í•¨í•˜ëŠ” ë©”ì¸ ì—ì´ì „íŠ¸ ìƒíƒœ."""
    
    supervisor_messages: Annotated[list[MessageLikeRepresentation], override_reducer]
    research_brief: str | None
    raw_notes: Annotated[list[str], override_reducer] = []
    notes: Annotated[list[str], override_reducer] = []
    final_report: str
    compressed_research_length: int = 0
    raw_notes_length: int = 0
```

### ê° í•„ë“œ ìƒì„¸ ì„¤ëª…

#### `supervisor_messages`
```python
supervisor_messages: Annotated[list[MessageLikeRepresentation], override_reducer]
```

**ì—­í• **: ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´í„°ì™€ ì„œë¸Œì—ì´ì „íŠ¸ ê°„ì˜ ëŒ€í™” ê¸°ë¡

**ì˜ˆì‹œ ë°ì´í„°:**
```python
[
    {"role": "user", "content": "AI ìœ¤ë¦¬ì— ëŒ€í•´ ì—°êµ¬í•´ì¤˜"},
    {"role": "assistant", "content": "3ê°œì˜ í•˜ìœ„ ì£¼ì œë¡œ ë‚˜ëˆ„ì–´ ì—°êµ¬í•˜ê² ìŠµë‹ˆë‹¤"},
    {"role": "tool", "content": "researcher ì—ì´ì „íŠ¸ ì‹¤í–‰ ì¤‘..."}
]
```

**`override_reducer`ì˜ ì˜ë¯¸:**
- ì¼ë°˜ì ìœ¼ë¡œ ë©”ì‹œì§€ëŠ” ê³„ì† ì¶”ê°€ë¨ (append)
- í•˜ì§€ë§Œ íŠ¹ë³„í•œ ê²½ìš° ì „ì²´ë¥¼ êµì²´í•  ìˆ˜ ìˆìŒ

#### `research_brief`
```python
research_brief: str | None
```

**ì—­í• **: ì‚¬ìš©ì ì§ˆë¬¸ì„ ê¸°ë°˜ìœ¼ë¡œ ìƒì„±ëœ ì—°êµ¬ ê³„íšì„œ

**ì˜ˆì‹œ:**
```python
research_brief = """
ì—°êµ¬ ì£¼ì œ: AI ìœ¤ë¦¬ì˜ í˜„í™©ê³¼ ê³¼ì œ

ì£¼ìš” ì—°êµ¬ ì§ˆë¬¸:
1. AI ìœ¤ë¦¬ì˜ í•µì‹¬ ì›ì¹™ì€ ë¬´ì—‡ì¸ê°€?
2. í˜„ì¬ ì§ë©´í•œ ìœ¤ë¦¬ì  ê³¼ì œëŠ”?
3. í–¥í›„ ë°œì „ ë°©í–¥ì€?

ì˜ˆìƒ ê²°ê³¼ë¬¼: ê° ì§ˆë¬¸ì— ëŒ€í•œ ì‹¬ì¸µ ë¶„ì„ ë³´ê³ ì„œ
"""
```

#### `raw_notes`
```python
raw_notes: Annotated[list[str], override_reducer] = []
```

**ì—­í• **: ì—°êµ¬ìë“¤ì´ ìˆ˜ì§‘í•œ ê°€ê³µë˜ì§€ ì•Šì€ ì •ë³´

**ì˜ˆì‹œ:**
```python
raw_notes = [
    "AI ìœ¤ë¦¬ ì›ì¹™: íˆ¬ëª…ì„±, ê³µì •ì„±, ì±…ì„ì„± (ì¶œì²˜: IEEE)",
    "í¸í–¥ ë¬¸ì œ: í›ˆë ¨ ë°ì´í„°ì˜ í¸í–¥ì´ AI ê²°ì •ì— ì˜í–¥ (ì¶œì²˜: MIT)",
    "ê·œì œ ë™í–¥: EU AI Act 2024ë…„ ì‹œí–‰ ì˜ˆì • (ì¶œì²˜: EU ê³µì‹ ë¬¸ì„œ)"
]
```

#### `notes`
```python
notes: Annotated[list[str], override_reducer] = []
```

**ì—­í• **: ì••ì¶•ê¸°ê°€ ì •ë¦¬í•œ êµ¬ì¡°í™”ëœ ì •ë³´

**ì˜ˆì‹œ:**
```python
notes = [
    """
    ## AI ìœ¤ë¦¬ í•µì‹¬ ì›ì¹™
    - íˆ¬ëª…ì„±: AI ê²°ì • ê³¼ì •ì˜ ì„¤ëª… ê°€ëŠ¥ì„±
    - ê³µì •ì„±: í¸í–¥ ì—†ëŠ” ì˜ì‚¬ê²°ì •
    - ì±…ì„ì„±: AI í–‰ë™ì— ëŒ€í•œ ì±…ì„ ì†Œì¬ ëª…í™•í™”
    (ì¶œì²˜: IEEE, ACM ìœ¤ë¦¬ ê°€ì´ë“œë¼ì¸)
    """
]
```

#### `final_report`
```python
final_report: str
```

**ì—­í• **: ìµœì¢… ìƒì„±ëœ ë³´ê³ ì„œ

**ì˜ˆì‹œ:**
```python
final_report = """
# AI ìœ¤ë¦¬ì˜ í˜„í™©ê³¼ ê³¼ì œ

## ìš”ì•½
AI ìœ¤ë¦¬ëŠ” íˆ¬ëª…ì„±, ê³µì •ì„±, ì±…ì„ì„±ì„ í•µì‹¬ ì›ì¹™ìœ¼ë¡œ...

## 1. AI ìœ¤ë¦¬ì˜ í•µì‹¬ ì›ì¹™
...

## 2. í˜„ì¬ ì§ë©´í•œ ê³¼ì œ
...

## 3. í–¥í›„ ë°œì „ ë°©í–¥
...

## ì°¸ê³  ë¬¸í—Œ
...
"""
```

#### ê¸¸ì´ ì¶”ì  í•„ë“œ
```python
compressed_research_length: int = 0  # ì••ì¶•ëœ ì—°êµ¬ ê¸¸ì´ (ë¬¸ì ìˆ˜)
raw_notes_length: int = 0            # ì›ì‹œ ë…¸íŠ¸ ê¸¸ì´ (ë¬¸ì ìˆ˜)
```

**ì—­í• **: ì •ë³´ ì••ì¶• íš¨ìœ¨ì„± ì¸¡ì •

**ì‚¬ìš© ì˜ˆ:**
```python
# ì••ì¶• ì „: 50,000ì
# ì••ì¶• í›„: 10,000ì
# ì••ì¶•ë¥ : 80%
```

---

## 2ï¸âƒ£ SupervisorState - ê°ë…ì ìƒíƒœ

### ì „ì²´ ì½”ë“œ
```python
class SupervisorState(TypedDict):
    """ì—°êµ¬ ì‘ì—…ì„ ê´€ë¦¬í•˜ëŠ” ê°ë…ìë¥¼ ìœ„í•œ ìƒíƒœ."""
    
    supervisor_messages: Annotated[list[MessageLikeRepresentation], override_reducer]
    research_brief: str
    notes: Annotated[list[str], override_reducer] = []
    research_iterations: int = 0
    raw_notes: Annotated[list[str], override_reducer] = []
    compressed_research_length: int = 0
    raw_notes_length: int = 0
```

### ì¶”ê°€ í•„ë“œ ì„¤ëª…

#### `research_iterations`
```python
research_iterations: int = 0
```

**ì—­í• **: í˜„ì¬ê¹Œì§€ ìˆ˜í–‰í•œ ì—°êµ¬ ë°˜ë³µ íšŸìˆ˜

**ì‚¬ìš© ì˜ˆ:**
```python
# ìµœëŒ€ 10íšŒ ë°˜ë³µ ì„¤ì •
if state["research_iterations"] >= 10:
    # ì—°êµ¬ ì¢…ë£Œ
    return "finalize"
else:
    # ì¶”ê°€ ì—°êµ¬ ìˆ˜í–‰
    state["research_iterations"] += 1
    return "continue_research"
```

---

## 3ï¸âƒ£ ResearcherState - ì—°êµ¬ì ìƒíƒœ

### ì „ì²´ ì½”ë“œ
```python
class ResearcherState(TypedDict):
    """ì—°êµ¬ë¥¼ ìˆ˜í–‰í•˜ëŠ” ê°œë³„ Researcherë“¤ì„ ìœ„í•œ ìƒíƒœ."""
    
    researcher_messages: Annotated[list[MessageLikeRepresentation], operator.add]
    tool_call_iterations: int = 0
    research_topic: str
    compressed_research: str
    raw_notes: Annotated[list[str], override_reducer] = []
```

### ê° í•„ë“œ ì„¤ëª…

#### `researcher_messages`
```python
researcher_messages: Annotated[list[MessageLikeRepresentation], operator.add]
```

**ì—­í• **: ê°œë³„ ì—°êµ¬ìì˜ ëŒ€í™” ê¸°ë¡

**ì˜ˆì‹œ:**
```python
[
    {"role": "user", "content": "AI í¸í–¥ ë¬¸ì œì— ëŒ€í•´ ì¡°ì‚¬í•˜ì„¸ìš”"},
    {"role": "assistant", "content": "tavily_searchë¥¼ ì‚¬ìš©í•˜ì—¬ ê²€ìƒ‰í•©ë‹ˆë‹¤"},
    {"role": "tool", "content": "ê²€ìƒ‰ ê²°ê³¼: ..."}
]
```

#### `tool_call_iterations`
```python
tool_call_iterations: int = 0
```

**ì—­í• **: ë„êµ¬ë¥¼ ëª‡ ë²ˆ í˜¸ì¶œí–ˆëŠ”ì§€ ì¶”ì 

**ì‚¬ìš© ì˜ˆ:**
```python
# ë¬´í•œ ë£¨í”„ ë°©ì§€
if state["tool_call_iterations"] > 20:
    # ê°•ì œ ì¢…ë£Œ
    return ResearchComplete()
```

#### `research_topic`
```python
research_topic: str
```

**ì—­í• **: ì´ ì—°êµ¬ìê°€ ë‹´ë‹¹í•˜ëŠ” êµ¬ì²´ì ì¸ ì£¼ì œ

**ì˜ˆì‹œ:**
```python
research_topic = "AI í¸í–¥ ë¬¸ì œì˜ ì›ì¸ê³¼ í•´ê²° ë°©ì•ˆ"
```

#### `compressed_research`
```python
compressed_research: str
```

**ì—­í• **: ì—°êµ¬ìê°€ ìˆ˜ì§‘í•œ ì •ë³´ë¥¼ ìš”ì•½í•œ ê²°ê³¼

**ì˜ˆì‹œ:**
```python
compressed_research = """
AI í¸í–¥ ë¬¸ì œëŠ” ì£¼ë¡œ í›ˆë ¨ ë°ì´í„°ì˜ ë¶ˆê· í˜•ì—ì„œ ë°œìƒí•©ë‹ˆë‹¤.
í•´ê²° ë°©ì•ˆìœ¼ë¡œëŠ” ë‹¤ì–‘í•œ ë°ì´í„° ìˆ˜ì§‘, ê³µì •ì„± ë©”íŠ¸ë¦­ ì ìš© ë“±ì´ ìˆìŠµë‹ˆë‹¤.
"""
```

---

## 4ï¸âƒ£ êµ¬ì¡°í™”ëœ ì¶œë ¥ ëª¨ë¸

### ConductResearch
```python
class ConductResearch(BaseModel):
    """íŠ¹ì • ì£¼ì œì— ëŒ€í•œ ì—°êµ¬ë¥¼ ìˆ˜í–‰í•˜ê¸° ìœ„í•´ ì´ ë„êµ¬ë¥¼ í˜¸ì¶œí•©ë‹ˆë‹¤."""
    
    research_topic: str = Field(
        description="ì—°êµ¬í•  ì£¼ì œ. ë‹¨ì¼ ì£¼ì œì—¬ì•¼ í•˜ë©°, ìµœì†Œí•œ í•œ ë¬¸ë‹¨ ì •ë„ë¡œ ìƒì„¸í•˜ê²Œ ì„¤ëª…í•´ì•¼ í•©ë‹ˆë‹¤.",
    )
```

**ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤:**
```python
# ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´í„°ê°€ ìƒˆë¡œìš´ ì—°êµ¬ ì‹œì‘
conduct = ConductResearch(
    research_topic="""
    AI ìœ¤ë¦¬ì—ì„œ íˆ¬ëª…ì„± ì›ì¹™ì˜ êµ¬ì²´ì  ì ìš© ì‚¬ë¡€
    - ì„¤ëª… ê°€ëŠ¥í•œ AI (XAI) ê¸°ìˆ 
    - ê¸°ì—…ì˜ íˆ¬ëª…ì„± ì •ì±…
    - ê·œì œ ìš”êµ¬ì‚¬í•­
    """
)
```

### ResearchComplete
```python
class ResearchComplete(BaseModel):
    """ì—°êµ¬ê°€ ì™„ë£Œë˜ì—ˆìŒì„ ë‚˜íƒ€ë‚´ê¸° ìœ„í•´ ì´ ë„êµ¬ë¥¼ í˜¸ì¶œí•©ë‹ˆë‹¤."""
```

**ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤:**
```python
# ì—°êµ¬ìê°€ ì‘ì—… ì™„ë£Œ
return ResearchComplete()
```

### Summary
```python
class Summary(BaseModel):
    """ì£¼ìš” ë°œê²¬ì‚¬í•­ê³¼ í•¨ê»˜ ì—°êµ¬ ìš”ì•½ ì œê³µ."""
    
    summary: str
    key_excerpts: str
```

**ì‚¬ìš© ì˜ˆ:**
```python
summary = Summary(
    summary="AI í¸í–¥ì€ ë°ì´í„°ì™€ ì•Œê³ ë¦¬ì¦˜ ë‘ ì¸¡ë©´ì—ì„œ ë°œìƒí•©ë‹ˆë‹¤.",
    key_excerpts="""
    "í›ˆë ¨ ë°ì´í„°ì˜ ì¸êµ¬í†µê³„í•™ì  ë¶ˆê· í˜•ì´ ì£¼ìš” ì›ì¸" - MIT ì—°êµ¬
    "ê³µì •ì„± ë©”íŠ¸ë¦­ì„ í†µí•œ ì‚¬ì „ ê²€ì¦ í•„ìš”" - Google AI
    """
)
```

---

## 5ï¸âƒ£ ë¦¬ë“€ì„œ í•¨ìˆ˜ (Reducer)

### override_reducer ì´í•´í•˜ê¸°

```python
def override_reducer(current_value, new_value):
    """ìƒíƒœì—ì„œ ê°’ì„ ë®ì–´ì“°ê¸°í•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” ë¦¬ë“€ì„œ í•¨ìˆ˜."""
    if isinstance(new_value, dict) and new_value.get("type") == "override":
        return new_value.get("value", new_value)
    else:
        return operator.add(current_value, new_value)
```

### ë™ì‘ ë°©ì‹

#### ì¼ë°˜ ì¶”ê°€ (append)
```python
# í˜„ì¬ ìƒíƒœ
state["raw_notes"] = ["ë…¸íŠ¸1", "ë…¸íŠ¸2"]

# ìƒˆë¡œìš´ ê°’ ì¶”ê°€
new_notes = ["ë…¸íŠ¸3"]

# ê²°ê³¼ (operator.add ì‚¬ìš©)
state["raw_notes"] = ["ë…¸íŠ¸1", "ë…¸íŠ¸2", "ë…¸íŠ¸3"]
```

#### ë®ì–´ì“°ê¸° (override)
```python
# í˜„ì¬ ìƒíƒœ
state["raw_notes"] = ["ë…¸íŠ¸1", "ë…¸íŠ¸2"]

# ë®ì–´ì“°ê¸°
new_notes = {
    "type": "override",
    "value": ["ìƒˆë¡œìš´ë…¸íŠ¸1", "ìƒˆë¡œìš´ë…¸íŠ¸2"]
}

# ê²°ê³¼
state["raw_notes"] = ["ìƒˆë¡œìš´ë…¸íŠ¸1", "ìƒˆë¡œìš´ë…¸íŠ¸2"]
```

### ì™œ í•„ìš”í•œê°€?

**ì‹œë‚˜ë¦¬ì˜¤ 1: ì„¸ì…˜ ì¬ì‹œì‘**
```python
# ì´ì „ ì„¸ì…˜ì˜ ì˜¤ë˜ëœ ë…¸íŠ¸ ì œê±°í•˜ê³  ìƒˆë¡œ ì‹œì‘
state["raw_notes"] = {
    "type": "override",
    "value": []
}
```

**ì‹œë‚˜ë¦¬ì˜¤ 2: ì—ëŸ¬ ë³µêµ¬**
```python
# ì˜ëª»ëœ ë°ì´í„° ì œê±°í•˜ê³  ì˜¬ë°”ë¥¸ ë°ì´í„°ë¡œ êµì²´
state["notes"] = {
    "type": "override",
    "value": corrected_notes
}
```

---

## 6ï¸âƒ£ ìƒíƒœ íë¦„ ì˜ˆì‹œ

### ì „ì²´ ì—°êµ¬ í”„ë¡œì„¸ìŠ¤ì—ì„œì˜ ìƒíƒœ ë³€í™”

```python
# ì´ˆê¸° ìƒíƒœ
state = {
    "messages": [],
    "supervisor_messages": [],
    "research_brief": None,
    "raw_notes": [],
    "notes": [],
    "final_report": "",
    "research_iterations": 0
}

# 1ë‹¨ê³„: ì‚¬ìš©ì ì§ˆë¬¸ ì…ë ¥
state["messages"].append({
    "role": "user",
    "content": "AI ìœ¤ë¦¬ì— ëŒ€í•´ ì—°êµ¬í•´ì¤˜"
})

# 2ë‹¨ê³„: ì—°êµ¬ ê³„íš ìƒì„±
state["research_brief"] = "AI ìœ¤ë¦¬ì˜ í•µì‹¬ ì›ì¹™ê³¼ ê³¼ì œ ë¶„ì„"

# 3ë‹¨ê³„: ì—°êµ¬ì 1 ì‹¤í–‰
state["raw_notes"].append("íˆ¬ëª…ì„± ì›ì¹™: AI ê²°ì • ê³¼ì • ì„¤ëª… ê°€ëŠ¥ì„±...")
state["research_iterations"] = 1

# 4ë‹¨ê³„: ì—°êµ¬ì 2 ì‹¤í–‰
state["raw_notes"].append("ê³µì •ì„± ì›ì¹™: í¸í–¥ ì—†ëŠ” ì˜ì‚¬ê²°ì •...")
state["research_iterations"] = 2

# 5ë‹¨ê³„: ì••ì¶•ê¸° ì‹¤í–‰
state["notes"].append("""
## AI ìœ¤ë¦¬ í•µì‹¬ ì›ì¹™
1. íˆ¬ëª…ì„±: ...
2. ê³µì •ì„±: ...
""")

# 6ë‹¨ê³„: ìµœì¢… ë³´ê³ ì„œ ìƒì„±
state["final_report"] = "# AI ìœ¤ë¦¬ ì—°êµ¬ ë³´ê³ ì„œ\n\n..."
```

---

## 7ï¸âƒ£ ìƒíƒœ ë””ë²„ê¹… íŒ

### ìƒíƒœ ì¶œë ¥í•˜ê¸°
```python
# í˜„ì¬ ìƒíƒœ í™•ì¸
print("=== Current State ===")
print(f"Research iterations: {state['research_iterations']}")
print(f"Raw notes count: {len(state['raw_notes'])}")
print(f"Notes count: {len(state['notes'])}")
print(f"Has final report: {bool(state['final_report'])}")
```

### ìƒíƒœ ê²€ì¦í•˜ê¸°
```python
def validate_state(state):
    """ìƒíƒœê°€ ìœ íš¨í•œì§€ í™•ì¸"""
    assert state["research_brief"] is not None, "ì—°êµ¬ ê³„íšì´ ì—†ìŠµë‹ˆë‹¤"
    assert len(state["raw_notes"]) > 0, "ìˆ˜ì§‘ëœ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤"
    assert state["research_iterations"] <= 10, "ìµœëŒ€ ë°˜ë³µ íšŸìˆ˜ ì´ˆê³¼"
```

### ìƒíƒœ ì €ì¥í•˜ê¸°
```python
import json

# ìƒíƒœë¥¼ íŒŒì¼ë¡œ ì €ì¥
with open("state_snapshot.json", "w") as f:
    json.dump({
        "research_brief": state["research_brief"],
        "raw_notes": state["raw_notes"],
        "notes": state["notes"],
        "iterations": state["research_iterations"]
    }, f, indent=2, ensure_ascii=False)
```

---

## 8ï¸âƒ£ ì‹¤ì „ ì˜ˆì œ: ìƒíƒœ ì—…ë°ì´íŠ¸

### ì—°êµ¬ìê°€ ì •ë³´ë¥¼ ì¶”ê°€í•˜ëŠ” ê²½ìš°
```python
def researcher_node(state: ResearcherState):
    # ì›¹ ê²€ìƒ‰ ìˆ˜í–‰
    search_result = tavily_search("AI ìœ¤ë¦¬")
    
    # ìƒíƒœ ì—…ë°ì´íŠ¸
    return {
        "raw_notes": [search_result],  # ë¦¬ìŠ¤íŠ¸ì— ì¶”ê°€ë¨
        "tool_call_iterations": state["tool_call_iterations"] + 1
    }
```

### ì••ì¶•ê¸°ê°€ ë…¸íŠ¸ë¥¼ ì •ë¦¬í•˜ëŠ” ê²½ìš°
```python
def compressor_node(state: SupervisorState):
    # ëª¨ë“  raw_notes ì½ê¸°
    all_notes = state["raw_notes"]
    
    # ì••ì¶• ë° ì •ë¦¬
    compressed = compress_and_organize(all_notes)
    
    # ìƒíƒœ ì—…ë°ì´íŠ¸
    return {
        "notes": [compressed],
        "compressed_research_length": len(compressed),
        "raw_notes_length": sum(len(note) for note in all_notes)
    }
```

---

## ğŸ¯ í•µì‹¬ ìš”ì•½

1. **AgentState**: ì „ì²´ ì‹œìŠ¤í…œì˜ ë©”ì¸ ìƒíƒœ
2. **SupervisorState**: ì—°êµ¬ ì§„í–‰ ê´€ë¦¬ìš© ìƒíƒœ
3. **ResearcherState**: ê°œë³„ ì—°êµ¬ì ì‘ì—… ìƒíƒœ
4. **override_reducer**: ìƒíƒœ ì—…ë°ì´íŠ¸ ë°©ì‹ ì œì–´ (ì¶”ê°€ vs ë®ì–´ì“°ê¸°)
5. **êµ¬ì¡°í™”ëœ ì¶œë ¥**: ì—ì´ì „íŠ¸ ê°„ í†µì‹ ì„ ìœ„í•œ í‘œì¤€ í˜•ì‹

## ğŸ“š ë‹¤ìŒ ë‹¨ê³„

ìƒíƒœ ê´€ë¦¬ë¥¼ ì´í•´í–ˆë‹¤ë©´, **03_ì„œë¸Œì—ì´ì „íŠ¸_ë™ì‘ì›ë¦¬.md**ì—ì„œ ê° ì„œë¸Œì—ì´ì „íŠ¸ê°€ ì–´ë–»ê²Œ ë™ì‘í•˜ëŠ”ì§€ ì•Œì•„ë³´ì„¸ìš”!
