# μ„λΈμ—μ΄μ „νΈ λ™μ‘ μ›λ¦¬

## π“ μ„λΈμ—μ΄μ „νΈλ€?

**μ„λΈμ—μ΄μ „νΈ(SubAgent)**λ” νΉμ • μ‘μ—…μ„ μ „λ¬Έμ μΌλ΅ μν–‰ν•λ” λ…λ¦½μ μΈ AI μ—μ΄μ „νΈμ…λ‹λ‹¤. λ§μΉ νμ‚¬μ—μ„ κ° λ¶€μ„κ°€ μ „λ¬Έ μ—…λ¬΄λ¥Ό λ‹΄λ‹Ήν•λ” κ²ƒμ²λΌ, κ° μ„λΈμ—μ΄μ „νΈλ” μμ‹ μ μ—­ν• μ— μ§‘μ¤‘ν•©λ‹λ‹¤.

### λΉ„μ λ΅ μ΄ν•΄ν•κΈ°

```
μ—°κµ¬ ν”„λ΅μ νΈ ν€
β”β”€β”€ ν€μ¥ (μ¤μΌ€μ¤νΈλ μ΄ν„°)      β†’ μ „μ²΄ ν”„λ΅μ νΈ κ΄€λ¦¬
β”β”€β”€ μ—°κµ¬μ› (Researcher)        β†’ μλ£ μμ§‘
β”β”€β”€ νΈμ§‘μ (Compressor)        β†’ μλ£ μ •λ¦¬
β””β”€β”€ κ²€μμ (Critic)            β†’ ν’μ§ κ²€μ¦
```

---

## π― μ„λΈμ—μ΄μ „νΈ μΆ…λ¥

### 1. Researcher (μ—°κµ¬μ)
- **μ—­ν• **: μ›Ή κ²€μƒ‰μ„ ν†µν• μ •λ³΄ μμ§‘
- **λ„κµ¬**: tavily_search, think_tool
- **μ¶λ ¥**: μ›μ‹ μ—°κµ¬ λ…ΈνΈ

### 2. Compressor (μ••μ¶•κΈ°)
- **μ—­ν• **: μμ§‘λ μ •λ³΄ μ •λ¦¬ λ° μ••μ¶•
- **λ„κµ¬**: νμΌμ‹μ¤ν… (read_file, write_file)
- **μ¶λ ¥**: κµ¬μ΅°ν™”λ μ—°κµ¬ μ”μ•½

### 3. Critic (λΉ„ν‰κ°€)
- **μ—­ν• **: λ³΄κ³ μ„ ν’μ§ κ²€μ¦
- **λ„κµ¬**: νμΌμ‹μ¤ν…
- **μ¶λ ¥**: ν”Όλ“λ°± λ° κ°μ„  μ μ•

### 4. Dynamic (λ™μ  μ—μ΄μ „νΈ)
- **μ—­ν• **: λ°νƒ€μ„μ— μƒμ„±λλ” νΉμ λ©μ  μ—μ΄μ „νΈ
- **λ„κµ¬**: μ‘μ—…μ— λ”°λΌ λ™μ  ν• λ‹Ή
- **μ¶λ ¥**: μ‘μ—…λ³„ κ²°κ³Ό

---

## 1οΈβƒ£ Researcher - μ—°κµ¬μ μ—μ΄μ „νΈ

### μ½”λ“ κµ¬μ΅°
```python
def create_researcher_subagent(
    tools: list[Any],
    date: str,
    mcp_prompt: str = "",
) -> SubAgent:
    # μ—°κµ¬μμ© λ„κµ¬ ν•„ν„°λ§
    researcher_tool_names = {"tavily_search", "think_tool", "ResearchComplete"}
    researcher_tools = [
        t for t in tools if getattr(t, "name", None) in researcher_tool_names
    ]
    
    return SubAgent(
        name="researcher",
        description="νΉμ • μ£Όμ μ— λ€ν• μ§‘μ¤‘μ μ΄κ³  μ‹¬λ„ μλ” μ—°κµ¬λ¥Ό μν–‰",
        system_prompt=RESEARCHER_SYSTEM_PROMPT.format(
            date=date,
            mcp_prompt=mcp_prompt if mcp_prompt else "",
        ),
        tools=researcher_tools,
    )
```

### μ‹μ¤ν… ν”„λ΅¬ν”„νΈ (κ°„λµν™”)
```python
RESEARCHER_SYSTEM_PROMPT = """
λ‹Ήμ‹ μ€ μ „λ¬Έ μ—°κµ¬μμ…λ‹λ‹¤.

## μ—­ν• 
- μ£Όμ–΄μ§„ μ£Όμ μ— λ€ν•΄ μ‹¬λ„ μλ” μ΅°μ‚¬ μν–‰
- tavily_searchλ¥Ό μ‚¬μ©ν•μ—¬ μ‹ λΆ°ν•  μ μλ” μ •λ³΄ μμ§‘
- λ°κ²¬ν• λ‚΄μ©μ„ /output/notes/{topic}.mdμ— μ €μ¥

## μ‘μ—… νλ¦„
1. μ—°κµ¬ μ£Όμ  λ¶„μ„
2. ν•µμ‹¬ μ§λ¬Έ λ„μ¶
3. μ›Ή κ²€μƒ‰ μν–‰ (tavily_search)
4. κ²°κ³Ό μ •λ¦¬ λ° νμΌ μ €μ¥
5. ResearchComplete νΈμ¶

## μ£Όμμ‚¬ν•­
- μ‹ λΆ°ν•  μ μλ” μ¶μ² μ°μ„ 
- μΈμ© μ¶μ² λ…μ‹
- κ°κ΄€μ  μ‚¬μ‹¤ μ¤‘μ‹¬
- μµμ† 3-5κ° μ¶μ² ν™•μΈ

ν„μ¬ λ‚ μ§: {date}
"""
```

### λ™μ‘ μμ‹

#### μ…λ ¥
```python
research_topic = "AI νΈν–¥ λ¬Έμ μ μ›μΈκ³Ό ν•΄κ²° λ°©μ•"
```

#### μ‹¤ν–‰ κ³Όμ •
```python
# 1λ‹¨κ³„: μ£Όμ  λ¶„μ„
"AI νΈν–¥ λ¬Έμ λ¥Ό μ›μΈκ³Ό ν•΄κ²° λ°©μ•μΌλ΅ λ‚λ„μ–΄ μ΅°μ‚¬ν•κ² μµλ‹λ‹¤."

# 2λ‹¨κ³„: μ›Ή κ²€μƒ‰
tavily_search("AI bias causes")
tavily_search("AI fairness solutions")

# 3λ‹¨κ³„: κ²°κ³Ό μ •λ¦¬
"""
## AI νΈν–¥μ μ£Όμ” μ›μΈ

1. λ°μ΄ν„° νΈν–¥
- ν›λ ¨ λ°μ΄ν„°μ μΈκµ¬ν†µκ³„ν•™μ  λ¶κ· ν•
- μ—­μ‚¬μ  νΈν–¥μ΄ λ°μ΄ν„°μ— λ°μ
(μ¶μ²: MIT Technology Review, 2024)

2. μ•κ³ λ¦¬μ¦ νΈν–¥
- μµμ ν™” λ©ν‘μ νΈν–¥
- νΉμ • κ·Έλ£Ήμ— λ€ν• κ³Όμ ν•©
(μ¶μ²: Nature Machine Intelligence, 2023)

## ν•΄κ²° λ°©μ•

1. λ°μ΄ν„° λ‹¤μ–‘μ„± ν™•λ³΄
- κ· ν•μ΅ν λ°μ΄ν„°μ…‹ κµ¬μ¶•
- μ†μ μ§‘λ‹¨ λ°μ΄ν„° μ¦κ°•
(μ¶μ²: Google AI Blog, 2024)

2. κ³µμ •μ„± λ©”νΈλ¦­ μ μ©
- Demographic Parity
- Equal Opportunity
(μ¶μ²: ACM FAccT Conference, 2024)
"""

# 4λ‹¨κ³„: νμΌ μ €μ¥
write_file("/output/notes/ai_bias_research.md", content)

# 5λ‹¨κ³„: μ™„λ£ μ‹ νΈ
return ResearchComplete()
```

### μƒνƒ μ—…λ°μ΄νΈ
```python
# μ—°κµ¬ μ „
state = {
    "raw_notes": [],
    "tool_call_iterations": 0
}

# μ—°κµ¬ ν›„
state = {
    "raw_notes": ["AI νΈν–¥μ μ£Όμ” μ›μΈ...\nν•΄κ²° λ°©μ•..."],
    "tool_call_iterations": 5  # tavily_search 5ν νΈμ¶
}
```

---

## 2οΈβƒ£ Compressor - μ••μ¶•κΈ° μ—μ΄μ „νΈ

### μ½”λ“ κµ¬μ΅°
```python
def create_compressor_subagent(date: str) -> SubAgent:
    return SubAgent(
        name="compressor",
        description="μ—¬λ¬ μ—°κµ¬ λ…ΈνΈλ¥Ό μ½κ³  ν¬κ΄„μ μΈ μΆ…ν•© μƒμ„±",
        system_prompt=COMPRESSOR_SYSTEM_PROMPT.format(date=date),
        tools=[],  # νμΌμ‹μ¤ν… λ―Έλ“¤μ›¨μ–΄ λ„κµ¬λ§ μ‚¬μ©
    )
```

### μ‹μ¤ν… ν”„λ΅¬ν”„νΈ (κ°„λµν™”)
```python
COMPRESSOR_SYSTEM_PROMPT = """
λ‹Ήμ‹ μ€ μ—°κµ¬ μΆ…ν•© μ „λ¬Έκ°€μ…λ‹λ‹¤.

## μ—­ν• 
- /output/notes/ λ””λ ‰ν† λ¦¬μ λ¨λ“  μ—°κµ¬ λ…ΈνΈ μ½κΈ°
- μ¤‘λ³µ μ •λ³΄ μ κ±°
- λ…Όλ¦¬μ  κµ¬μ΅°λ΅ μ¬κµ¬μ„±
- /output/compressed_research.mdμ— μΆ…ν•© κ²°κ³Ό μ €μ¥

## μ‘μ—… νλ¦„
1. ls /output/notes/ μ‹¤ν–‰ν•μ—¬ λ¨λ“  λ…ΈνΈ νμΌ ν™•μΈ
2. κ° νμΌ μ½κΈ° (read_file)
3. μ •λ³΄ λ¶„λ¥ λ° μ¤‘λ³µ μ κ±°
4. μ£Όμ λ³„λ΅ μ¬κµ¬μ„±
5. μ••μ¶•λ κ²°κ³Όλ¥Ό compressed_research.mdμ— μ €μ¥

## μ••μ¶• μ›μΉ™
- ν•µμ‹¬ μ •λ³΄ μ μ§€
- μ¤‘λ³µ λ‚΄μ© μ κ±°
- μ¶μ² ν†µν•© μ •λ¦¬
- λ…Όλ¦¬μ  νλ¦„ κµ¬μ„±

ν„μ¬ λ‚ μ§: {date}
"""
```

### λ™μ‘ μμ‹

#### μ…λ ¥ (μ—¬λ¬ μ—°κµ¬ λ…ΈνΈ)
```
/output/notes/
β”β”€β”€ ai_bias_research.md      (5,000μ)
β”β”€β”€ ai_ethics_principles.md  (4,000μ)
β””β”€β”€ ai_regulation.md         (3,000μ)
```

#### μ‹¤ν–‰ κ³Όμ •
```python
# 1λ‹¨κ³„: νμΌ λ©λ΅ ν™•μΈ
files = ls("/output/notes/")
# ['ai_bias_research.md', 'ai_ethics_principles.md', 'ai_regulation.md']

# 2λ‹¨κ³„: λ¨λ“  νμΌ μ½κΈ°
note1 = read_file("/output/notes/ai_bias_research.md")
note2 = read_file("/output/notes/ai_ethics_principles.md")
note3 = read_file("/output/notes/ai_regulation.md")

# 3λ‹¨κ³„: μ •λ³΄ λ¶„μ„ λ° μ¤‘λ³µ μ κ±°
"""
note1κ³Ό note2μ—μ„ 'κ³µμ •μ„±' μ–ΈκΈ‰ β†’ ν†µν•©
note2μ™€ note3μ—μ„ 'EU AI Act' μ–ΈκΈ‰ β†’ ν†µν•©
"""

# 4λ‹¨κ³„: κµ¬μ΅°ν™”λ μΆ…ν•©
compressed = """
# AI μ¤λ¦¬ μΆ…ν•© μ—°κµ¬

## 1. ν•µμ‹¬ μ›μΉ™
- ν¬λ…μ„±: AI κ²°μ • κ³Όμ •μ μ„¤λ… κ°€λ¥μ„±
- κ³µμ •μ„±: νΈν–¥ μ—†λ” μμ‚¬κ²°μ • (note1, note2μ—μ„ ν†µν•©)
- μ±…μ„μ„±: AI ν–‰λ™μ— λ€ν• μ±…μ„ μ†μ¬
(μ¶μ²: IEEE, ACM μ¤λ¦¬ κ°€μ΄λ“λΌμΈ)

## 2. νΈν–¥ λ¬Έμ 
### μ›μΈ
- λ°μ΄ν„° νΈν–¥: ν›λ ¨ λ°μ΄ν„°μ λ¶κ· ν• (note1)
- μ•κ³ λ¦¬μ¦ νΈν–¥: μµμ ν™” λ©ν‘μ νΈν–¥ (note1)

### ν•΄κ²° λ°©μ•
- λ°μ΄ν„° λ‹¤μ–‘μ„± ν™•λ³΄ (note1)
- κ³µμ •μ„± λ©”νΈλ¦­ μ μ© (note1, note2)

## 3. κ·μ  λ™ν–¥
- EU AI Act: 2024λ…„ μ‹ν–‰ μμ • (note2, note3)
- μ„ν— κΈ°λ° λ¶„λ¥ μ²΄κ³„ (note3)
- κ³ μ„ν— AI μ‹μ¤ν… κ·μ  (note3)

## μ°Έκ³  λ¬Έν—
[ν†µν•© μ •λ¦¬λ μ¶μ² λ©λ΅]
"""

# 5λ‹¨κ³„: νμΌ μ €μ¥
write_file("/output/compressed_research.md", compressed)
```

### μ••μ¶• ν¨κ³Ό
```python
# μ••μ¶• μ „
raw_notes_length = 5000 + 4000 + 3000 = 12,000μ

# μ••μ¶• ν›„
compressed_length = 3,500μ

# μ••μ¶•λ¥ 
compression_rate = (1 - 3500/12000) * 100 = 70.8%
```

---

## 3οΈβƒ£ Critic - λΉ„ν‰κ°€ μ—μ΄μ „νΈ

### μ½”λ“ κµ¬μ΅°
```python
def create_critic_subagent(date: str) -> SubAgent:
    return SubAgent(
        name="critic",
        description="μ—°κµ¬ λ³΄κ³ μ„λ¥Ό κ²€ν† ν•κ³  κµ¬μ΅°ν™”λ ν”Όλ“λ°± μ κ³µ",
        system_prompt=CRITIC_SYSTEM_PROMPT.format(date=date),
        tools=[],
    )
```

### μ‹μ¤ν… ν”„λ΅¬ν”„νΈ (κ°„λµν™”)
```python
CRITIC_SYSTEM_PROMPT = """
λ‹Ήμ‹ μ€ ν’μ§ λ³΄μ¦ μ „λ¬Έκ°€μ…λ‹λ‹¤.

## μ—­ν• 
- μµμΆ… λ³΄κ³ μ„μ ν’μ§ κ²€μ¦
- κµ¬μ΅°ν™”λ ν”Όλ“λ°± μ κ³µ
- κ°μ„  μ μ• μ‘μ„±

## ν‰κ°€ κΈ°μ¤€
1. μ™„μ „μ„±: μ—°κµ¬ μ§λ¬Έμ— λ¨λ‘ λ‹µν–λ”κ°€?
2. μ •ν™•μ„±: μ •λ³΄κ°€ μ •ν™•ν•κ³  μµμ‹ μΈκ°€?
3. κµ¬μ΅°: λ…Όλ¦¬μ  νλ¦„μ΄ μλ”κ°€?
4. μΈμ©: μ¶μ²κ°€ λ…ν™•ν ν‘μ‹λμ—λ”κ°€?
5. κΉμ΄: μ¶©λ¶„ν μ‹¬λ„ μλ” λ¶„μ„μΈκ°€?

## μ‘μ—… νλ¦„
1. /research_brief.md μ½κΈ° (μ›λ μ—°κµ¬ μ§λ¬Έ ν™•μΈ)
2. /final_report.md μ½κΈ° (μµμΆ… λ³΄κ³ μ„)
3. κ° ν‰κ°€ κΈ°μ¤€λ³„λ΅ κ²€ν† 
4. /feedback.mdμ— ν”Όλ“λ°± μ‘μ„±

ν„μ¬ λ‚ μ§: {date}
"""
```

### λ™μ‘ μμ‹

#### μ…λ ¥
```
/research_brief.md: "AI μ¤λ¦¬μ ν•µμ‹¬ μ›μΉ™κ³Ό κ³Όμ  λ¶„μ„"
/final_report.md: [μµμΆ… λ³΄κ³ μ„ λ‚΄μ©]
```

#### μ‹¤ν–‰ κ³Όμ •
```python
# 1λ‹¨κ³„: μ—°κµ¬ μ§λ¬Έ ν™•μΈ
brief = read_file("/research_brief.md")
# "AI μ¤λ¦¬μ ν•µμ‹¬ μ›μΉ™κ³Ό κ³Όμ  λ¶„μ„"

# 2λ‹¨κ³„: μµμΆ… λ³΄κ³ μ„ μ½κΈ°
report = read_file("/final_report.md")

# 3λ‹¨κ³„: ν‰κ°€
feedback = """
# λ³΄κ³ μ„ ν’μ§ κ²€ν†  κ²°κ³Ό

## ν‰κ°€ μ”μ•½
μ „λ°μ μΌλ΅ μ°μν• λ³΄κ³ μ„μ΄λ‚ μΌλ¶€ κ°μ„ μ΄ ν•„μ”ν•©λ‹λ‹¤.

## μƒμ„Έ ν‰κ°€

### 1. μ™„μ „μ„± β­β­β­β­β† (4/5)
β… ν•µμ‹¬ μ›μΉ™ 3κ°€μ§€ λ¨λ‘ λ‹¤λ£Έ
β… μ£Όμ” κ³Όμ  μ‹λ³„
β ν–¥ν›„ λ°μ „ λ°©ν–¥ λ¶€μ΅±

**κ°μ„  μ μ•:**
- 3μ¥μ— "ν–¥ν›„ λ°μ „ λ°©ν–¥" μ„Ήμ… μ¶”κ°€
- λ‹¨κΈ°/μ¤‘κΈ°/μ¥κΈ° λ΅λ“λ§µ μ μ‹

### 2. μ •ν™•μ„± β­β­β­β­β­ (5/5)
β… λ¨λ“  μ •λ³΄ μµμ‹  (2024λ…„ κΈ°μ¤€)
β… μ‹ λΆ°ν•  μ μλ” μ¶μ² μ‚¬μ©
β… μ‚¬μ‹¤ κ΄€κ³„ μ •ν™•

### 3. κµ¬μ΅° β­β­β­β­β† (4/5)
β… λ…Όλ¦¬μ  νλ¦„
β… λ…ν™•ν• μ„Ήμ… κµ¬λ¶„
β μΌλ¶€ μ„Ήμ… κ°„ μ—°κ²° λ¶€μ΅±

**κ°μ„  μ μ•:**
- 1μ¥κ³Ό 2μ¥ μ‚¬μ΄μ— μ „ν™ λ¬Έλ‹¨ μ¶”κ°€
- κ° μ„Ήμ… λμ— μ†κ²°λ΅  μ¶”κ°€

### 4. μΈμ© β­β­β­β†β† (3/5)
β… μ£Όμ” μ¶μ² λ…μ‹
β μΌλ¶€ μ£Όμ¥μ— μ¶μ² λ„λ½
β μ°Έκ³  λ¬Έν— ν•μ‹ λ¶μΌμΉ

**κ°μ„  μ μ•:**
- 2.3μ μ ν†µκ³„ λ°μ΄ν„°μ— μ¶μ² μ¶”κ°€
- μ°Έκ³  λ¬Έν—μ„ APA ν•μ‹μΌλ΅ ν†µμΌ

### 5. κΉμ΄ β­β­β­β­β† (4/5)
β… μ‹¬λ„ μλ” λ¶„μ„
β… κµ¬μ²΄μ  μ‚¬λ΅€ μ μ‹
β μΌλ¶€ μ£Όμ  ν‘λ©΄μ  λ‹¤λ£Έ

**κ°μ„  μ μ•:**
- νΈν–¥ λ¬Έμ μ— λ€ν• κΈ°μ μ  μ„Έλ¶€μ‚¬ν•­ μ¶”κ°€
- μ‹¤μ  μ‚¬λ΅€ μ—°κµ¬ 1-2κ° μ¶”κ°€

## μΆ…ν•© μκ²¬
μ°μν• λ³΄κ³ μ„μ…λ‹λ‹¤. μ μ•λ κ°μ„ μ‚¬ν•­μ„ λ°μν•λ©΄
λ”μ± μ™„μ„±λ„ λ†’μ€ λ³΄κ³ μ„κ°€ λ  κ²ƒμ…λ‹λ‹¤.

## μ°μ„ μμ„ κ°μ„ μ‚¬ν•­
1. ν–¥ν›„ λ°μ „ λ°©ν–¥ μ„Ήμ… μ¶”κ°€ (ν•„μ)
2. μΈμ© μ¶μ² λ³΄μ™„ (ν•„μ)
3. μ„Ήμ… κ°„ μ—°κ²° κ°•ν™” (κ¶μ¥)
"""

# 4λ‹¨κ³„: ν”Όλ“λ°± μ €μ¥
write_file("/feedback.md", feedback)
```

---

## 4οΈβƒ£ Dynamic - λ™μ  μ—μ΄μ „νΈ

### κ°λ…
λ°νƒ€μ„μ— ν•„μ”μ— λ”°λΌ μƒμ„±λλ” μ„λΈμ—μ΄μ „νΈμ…λ‹λ‹¤.

### μ‚¬μ© μ‹λ‚λ¦¬μ¤

#### μ‹λ‚λ¦¬μ¤ 1: λ°μ΄ν„° λ¶„μ„ ν•„μ”
```python
# μ¤μΌ€μ¤νΈλ μ΄ν„°κ°€ νλ‹¨
"μ—°κµ¬ κ²°κ³Όμ— ν†µκ³„ λ¶„μ„μ΄ ν•„μ”ν•©λ‹λ‹¤."

# λ™μ  μ—μ΄μ „νΈ μƒμ„±
spawn_subagent(
    task="μμ§‘λ λ°μ΄ν„°μ ν†µκ³„ λ¶„μ„ μν–‰",
    required_skills=["data_analysis"],
    tools=["python_repl"]
)

# μƒμ„±λ μ—μ΄μ „νΈκ°€ μ‘μ—… μν–‰
"""
import pandas as pd
import matplotlib.pyplot as plt

# λ°μ΄ν„° λ¶„μ„ μ½”λ“...
"""
```

#### μ‹λ‚λ¦¬μ¤ 2: νΉμ κ²€μƒ‰ ν•„μ”
```python
# ν•™μ  λ…Όλ¬Έ κ²€μƒ‰μ΄ ν•„μ”ν• κ²½μ°
spawn_subagent(
    task="AI μ¤λ¦¬ κ΄€λ ¨ μµμ‹  ν•™μ  λ…Όλ¬Έ κ²€μƒ‰",
    required_skills=["academic_search"],
    tools=["arxiv_search", "semantic_scholar"]
)
```

---

## 5οΈβƒ£ μ„λΈμ—μ΄μ „νΈ κ°„ ν‘μ—…

### ν‘μ—… μ‹λ‚λ¦¬μ¤

```
μ‚¬μ©μ μ§λ¬Έ: "AI μ¤λ¦¬μ— λ€ν•΄ μ—°κµ¬ν•΄μ¤"
    β†“
μ¤μΌ€μ¤νΈλ μ΄ν„°: "3κ° ν•μ„ μ£Όμ λ΅ λ‚λ„μ–΄ μ—°κµ¬"
    β†“
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚ Researcher1 β”‚ Researcher2 β”‚ Researcher3 β”‚
β”‚   ν¬λ…μ„± μ΅°μ‚¬  β”‚   κ³µμ •μ„± μ΅°μ‚¬  β”‚  μ±…μ„μ„± μ΅°μ‚¬   β”‚
β””β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”΄β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”΄β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”
       β”‚             β”‚             β”‚
       β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”Όβ”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
                     β†“
              Compressor
              "3κ° μ—°κµ¬ ν†µν•©"
                     β†“
              Critic (μ„ νƒμ )
              "ν’μ§ κ²€μ¦"
                     β†“
           μµμΆ… λ³΄κ³ μ„ μƒμ„±
```

### μ½”λ“λ΅ λ³΄λ” ν‘μ—…
```python
# 1λ‹¨κ³„: λ³‘λ ¬ μ—°κµ¬ μ‹μ‘
for topic in ["ν¬λ…μ„±", "κ³µμ •μ„±", "μ±…μ„μ„±"]:
    spawn_researcher(topic)

# 2λ‹¨κ³„: λ¨λ“  μ—°κµ¬μ μ™„λ£ λ€κΈ°
while not all_researchers_complete():
    wait()

# 3λ‹¨κ³„: μ••μ¶•κΈ° μ‹¤ν–‰
invoke_compressor()

# 4λ‹¨κ³„: (μ„ νƒμ ) λΉ„ν‰κ°€ μ‹¤ν–‰
if enable_critique:
    invoke_critic()
    
    # ν”Όλ“λ°± ν™•μΈ
    feedback = read_file("/feedback.md")
    
    # ν•„μ”μ‹ μ¶”κ°€ μ—°κµ¬
    if needs_improvement(feedback):
        spawn_researcher(improvement_topic)
```

---

## 6οΈβƒ£ μ„λΈμ—μ΄μ „νΈ μƒλ…μ£ΌκΈ°

### μƒμ„± β†’ μ‹¤ν–‰ β†’ μΆ…λ£

```python
# 1. μƒμ„± (Creation)
researcher = create_researcher_subagent(
    tools=[tavily_search, think_tool],
    date="Mon Jan 15, 2024"
)

# 2. μ΄κΈ°ν™” (Initialization)
state = {
    "researcher_messages": [],
    "research_topic": "AI νΈν–¥ λ¬Έμ ",
    "tool_call_iterations": 0
}

# 3. μ‹¤ν–‰ (Execution)
while not complete:
    # λ„κµ¬ νΈμ¶
    result = tavily_search("AI bias")
    
    # μƒνƒ μ—…λ°μ΄νΈ
    state["tool_call_iterations"] += 1
    state["raw_notes"].append(result)
    
    # μΆ…λ£ μ΅°κ±΄ ν™•μΈ
    if sufficient_information():
        complete = True

# 4. μΆ…λ£ (Termination)
return ResearchComplete()

# 5. κ²°κ³Ό λ°ν™
return {
    "compressed_research": summary,
    "raw_notes": state["raw_notes"]
}
```

---

## 7οΈβƒ£ μ‹¤μ „ ν

### Tip 1: μ„λΈμ—μ΄μ „νΈ μ„ νƒ κΈ°μ¤€
```python
# μ •λ³΄ μμ§‘ ν•„μ” β†’ Researcher
if task_type == "information_gathering":
    use_researcher()

# μ •λ³΄ μ •λ¦¬ ν•„μ” β†’ Compressor
elif task_type == "synthesis":
    use_compressor()

# ν’μ§ κ²€μ¦ ν•„μ” β†’ Critic
elif task_type == "quality_check":
    use_critic()

# νΉμ μ‘μ—… β†’ Dynamic
else:
    spawn_dynamic_agent(task_description)
```

### Tip 2: λ³‘λ ¬ μ²λ¦¬ μµμ ν™”
```python
# λ‚μ μ: μμ°¨ μ‹¤ν–‰
for topic in topics:
    result = researcher.research(topic)  # λλ¦Ό!
    
# μΆ‹μ€ μ: λ³‘λ ¬ μ‹¤ν–‰
results = await asyncio.gather(*[
    researcher.research(topic)
    for topic in topics
])  # λΉ λ¦„!
```

### Tip 3: μ—λ¬ μ²λ¦¬
```python
try:
    result = researcher.research(topic)
except ToolCallError:
    # μ¬μ‹λ„
    result = researcher.research(topic, retry=True)
except MaxIterationsError:
    # κ°•μ  μΆ…λ£
    result = researcher.finalize()
```

---

## π― ν•µμ‹¬ μ”μ•½

1. **Researcher**: μ •λ³΄ μμ§‘ μ „λ¬Έ
2. **Compressor**: μ •λ³΄ μ •λ¦¬ λ° μ••μ¶•
3. **Critic**: ν’μ§ κ²€μ¦
4. **Dynamic**: νΉμ μ‘μ—… μ²λ¦¬
5. **ν‘μ—…**: κ° μ—μ΄μ „νΈκ°€ μμ°¨μ /λ³‘λ ¬λ΅ ν‘λ ¥

## π“ λ‹¤μ λ‹¨κ³„

μ„λΈμ—μ΄μ „νΈμ λ™μ‘ μ›λ¦¬λ¥Ό μ΄ν•΄ν–λ‹¤λ©΄, **04_μ „μ²΄_μ›ν¬ν”λ΅μ°.md**μ—μ„ μ „μ²΄ μ‹μ¤ν…μ΄ μ–΄λ–»κ² νλ¥΄λ”μ§€ μ•μ•„λ³΄μ„Έμ”!
